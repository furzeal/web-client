@using Microsoft.AspNetCore.Identity
<!DOCTYPE html>

@inject SignInManager<IdentityUser> SignInManager
<html>
<head>
    <meta name="viewport" content="width=device-width"/>
    <title>@ViewBag.Title</title>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <ul class="nav navbar-nav">
            <li class="nav__item"><a asp-controller="Home" asp-action="Index" class="navbar-brand">Bethany's Pie Shop</a></li>
            <li class="nav__item"><a asp-controller="Feedback" asp-action="Index">Contact us</a></li>
        </ul>
        
        @if (SignInManager.IsSignedIn(User))
        {
            <form asp-area="" asp-controller="Account" asp-action="Logout" id="logoutForm"
                  method="post" class="navbar-right">
                <ul class="nav navbar-nav navbar-right">
                    <li class="nav__item"><a href="javascript:document.getElementById('logoutForm').submit()">Log off</a></li>
                </ul>
            </form>
        }
        else
        {
            <ul class="nav navbar-nav navbar-right">
                <li class="nav__item"><a id="registerLink" asp-controller="Account" asp-action="Register">Register</a></li>
                <li class="nav__item"><a id="loginLink" asp-controller="Account" asp-action="Login">Log in</a></li>
            </ul>
        }
    </div>
</nav>
<div class="container body-content">
    <div class="row">
        @RenderBody()
    </div>
</div>
<environment names="Development">
    <script src="~/dist/main.js"></script>
</environment>
<environment names="Staging,Production">
    <script src="~/dist/main.js" asp-append-version="true"></script>
</environment>
</body>
</html>